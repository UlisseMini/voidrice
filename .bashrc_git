#!/bin/bash
#  _               _
# | |__   __ _ ___| |__  _ __ ___
# | '_ \ / _` / __| '_ \| '__/ __|
# | |_) | (_| \__ \ | | | | | (__
# |_.__/ \__,_|___/_| |_|_|  \___|

stty -ixon # Disable ctrl-s and ctrl-q.
HISTSIZE= HISTFILESIZE= # Infinite history.

# function returns the current git branch if it exists, otherwise ""
function branch() {
	git branch 2>/dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

# Setting Bash prompt. Capitalizes username and host if root user (my root user uses this same config file).
if [ "$EUID" -ne 0 ]; then
	p="\[$(tput bold)\]\[$(tput setaf 1)\]["                      # opening bracket
	p="$p\[$(tput setaf 3)\]\u"                                   # user
	p="$p\[$(tput setaf 2)\]@\[$(tput setaf 4)\]\h"               # hostname
	p="$p\$(branch) "                                             # git branch
	p="$p\[$(tput setaf 5)\]\W"                                   # working directory
	p="$p\[$(tput setaf 1)\]]"                                    # closing bracket
	p="$p\[$(tput setaf 7)\]\\$ \[$(tput sgr0)\]"                 # ending $

	export PS1="$p"
	unset p

	# PS1 for root
	else export PS1="\[$(tput bold)\]\[$(tput setaf 1)\][\[$(tput setaf 3)\]ROOT\[$(tput setaf 2)\]@\[$(tput setaf 4)\]$(hostname | awk '{print toupper($0)}') \[$(tput setaf 5)\]\W\[$(tput setaf 1)\]]\[$(tput setaf 7)\]\\$ \[$(tput sgr0)\]"
fi

export GPG_TTY=$(tty)

# luke wtf is this shiet
#shdl() { curl -O $(curl -s http://sci-hub.tw/"$@" | grep location.href | grep -o http.*pdf) ;}
#vf() { $EDITOR $(fzf) ;}

# aliases in here
source /home/$USER/.zsh_aliases

# autogenerated shortcuts
source /home/$USER/.shortcuts.sh

# golang
export GOPATH=/home/$USER/go
export GOBIN=/home/$USER/go/bin

# path
export PATH=$PATH:/$GOPATH/bin:$HOME/.local/bin
export PATH=$PATH:/home/peep/.cabal/bin

# cdpath
export CDPATH=$CDPATH:$GOPATH/src

# add every subdirectory in $GOPATH/src/github.com to $CDPATH
for d in $GOPATH/src/github.com/*
do
	export CDPATH=$CDPATH:$d
done
